# MobiLiF环境变量示例文件
# 复制为.env并填写正确的配置值

# ========================================
# 应用基础配置
# ========================================
NODE_ENV=development
PORT=3000
APP_NAME=MobiLiF
APP_VERSION=1.0.0
APP_URL=http://localhost:3000

# ========================================
# 数据库配置
# ========================================
# 主数据库（写）
DATABASE_URL="mysql://mobilif_app:your_password@localhost:3306/mobilif"
DB_HOST=localhost
DB_PORT=3306
DB_USERNAME=mobilif_app
DB_PASSWORD=your_password
DB_DATABASE=mobilif
DB_CHARSET=utf8mb4
DB_TIMEZONE=+08:00

# 从数据库（读） - 可选
DB_SLAVE_HOST=localhost
DB_SLAVE_PORT=3306
DB_SLAVE_USERNAME=mobilif_read
DB_SLAVE_PASSWORD=your_read_password

# 连接池配置
DB_POOL_MIN=5
DB_POOL_MAX=50
DB_POOL_IDLE_TIMEOUT=30000
DB_POOL_ACQUIRE_TIMEOUT=60000

# 读写分离
DB_READ_WRITE_SEPARATION=true

# ========================================
# Redis配置
# ========================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_PREFIX=mobilif:
REDIS_TTL=3600

# ========================================
# JWT配置
# ========================================
JWT_SECRET=your-jwt-secret-key
JWT_EXPIRES_IN=7d
JWT_REFRESH_SECRET=your-refresh-secret-key
JWT_REFRESH_EXPIRES_IN=30d

# ========================================
# 微信小程序配置
# ========================================
WECHAT_APP_ID=your-wechat-app-id
WECHAT_APP_SECRET=your-wechat-app-secret
WECHAT_MCH_ID=your-merchant-id
WECHAT_KEY=your-payment-key
WECHAT_CERT_PATH=./config/ssl/apiclient_cert.pem
WECHAT_KEY_PATH=./config/ssl/apiclient_key.pem

# ========================================
# 支付配置
# ========================================
# 微信支付
WECHAT_PAY_NOTIFY_URL=http://localhost:3000/api/payments/wechat/notify
WECHAT_PAY_REFUND_URL=http://localhost:3000/api/payments/wechat/refund

# 支付宝支付（可选）
ALIPAY_APP_ID=your-alipay-app-id
ALIPAY_PRIVATE_KEY=your-alipay-private-key
ALIPAY_PUBLIC_KEY=your-alipay-public-key
ALIPAY_NOTIFY_URL=http://localhost:3000/api/payments/alipay/notify

# ========================================
# 文件存储配置
# ========================================
UPLOAD_DEST=./uploads
MAX_FILE_SIZE=10485760
ALLOWED_FILE_TYPES=jpg,jpeg,png,gif,mp4,mov,pdf

# 阿里云OSS（可选）
OSS_ENABLED=false
OSS_REGION=oss-cn-hangzhou
OSS_BUCKET=your-bucket-name
OSS_ACCESS_KEY_ID=your-access-key-id
OSS_ACCESS_KEY_SECRET=your-access-key-secret
OSS_DOMAIN=https://your-bucket.oss-cn-hangzhou.aliyuncs.com

# ========================================
# 消息队列配置
# ========================================
ROCKETMQ_NAMESERVER=localhost:9876
ROCKETMQ_INSTANCE_NAME=mobilif-dev
ROCKETMQ_GROUP_ID=mobilif_producer_group

# ========================================
# 第三方服务配置
# ========================================
# 短信服务
SMS_ENABLED=false
SMS_ACCESS_KEY_ID=your-sms-access-key
SMS_ACCESS_KEY_SECRET=your-sms-secret
SMS_SIGN_NAME=MobiLiF
SMS_TEMPLATE_CODE=SMS_123456789

# 邮件服务
MAIL_ENABLED=false
MAIL_HOST=smtp.example.com
MAIL_PORT=587
MAIL_SECURE=false
MAIL_USER=your-email@example.com
MAIL_PASS=your-email-password
MAIL_FROM=MobiLiF <noreply@example.com>

# ========================================
# 监控和日志配置
# ========================================
LOG_LEVEL=info
LOG_FORMAT=json
QUERY_LOGGING=false
SLOW_QUERY_THRESHOLD=1000

# Prometheus监控
PROMETHEUS_ENABLED=false
PROMETHEUS_PORT=9464

# Sentry错误追踪
SENTRY_ENABLED=false
SENTRY_DSN=your-sentry-dsn

# ========================================
# 安全配置
# ========================================
CORS_ORIGIN=http://localhost:3000
CORS_CREDENTIALS=true

# 限流配置
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX=100

# API密钥
API_SECRET_KEY=your-api-secret-key

# ========================================
# 业务配置
# ========================================
# 预约配置
BOOKING_ADVANCE_DAYS=7
BOOKING_CANCEL_HOURS=2

# 积分配置
POINTS_DAILY_CHECKIN=10
POINTS_COMPLETE_CLASS=50
POINTS_SKILL_CERTIFICATION=100
POINTS_FRIEND_REFERRAL=200

# 等级配置
LEVEL_EXP_BASE=1000
LEVEL_EXP_MULTIPLIER=1.5

# ========================================
# 部署配置
# ========================================
# 服务器主机地址（生产环境服务器IP或域名）
# 示例：SERVER_HOST=8.147.235.48 或 SERVER_HOST=api.mobilif.com
SERVER_HOST=your-server-ip-or-domain

# API基础URL（前端调用API的基础地址）
# 示例：SERVER_API_BASE=http://8.147.235.48:3000/api
SERVER_API_BASE=http://your-server-ip-or-domain:3000/api

# SSH 连接配置（用于远程部署）
SSH_HOST=your-server-ip-or-domain
SSH_USER=root
REMOTE_PROJECT_PATH=/opt/mobilif

# ========================================
# 开发配置
# ========================================
DEBUG_ENABLED=true
SWAGGER_ENABLED=true
HEALTH_CHECK_ENABLED=true