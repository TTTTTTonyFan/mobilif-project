<!--pages/gyms/gym-detail/gym-detail.wxml-->
<view class="container">
  <!-- åŠ è½½çŠ¶æ€ -->
  <view wx:if="{{loading}}" class="loading">
    <text>åŠ è½½ä¸­...</text>
  </view>

  <!-- åœºé¦†è¯¦æƒ…å†…å®¹ -->
  <view wx:else class="detail-content">
    <!-- å›¾ç‰‡è½®æ’­ -->
    <swiper wx:if="{{images.length > 0}}" 
            class="image-swiper" 
            indicator-dots="true"
            autoplay="true"
            interval="5000"
            bindchange="onImageChange"
            bindtap="previewImages">
      <swiper-item wx:for="{{images}}" wx:key="*this">
        <image src="{{item}}" mode="aspectFill" class="swiper-image" />
      </swiper-item>
    </swiper>

    <!-- é»˜è®¤å›¾ç‰‡ -->
    <view wx:else class="default-image">
      <text>æš‚æ— å›¾ç‰‡</text>
    </view>

    <!-- åœºé¦†åŸºæœ¬ä¿¡æ¯ -->
    <view class="gym-info">
      <view class="gym-header">
        <text class="gym-name">{{gym.name}}</text>
        <view class="gym-tags">
          <text wx:for="{{gym.tags}}" 
                wx:for-item="tag" 
                wx:key="*this" 
                class="gym-tag {{tag === 'CrossFitè®¤è¯' ? 'tag-crossfit' : ''}}">
            {{tag}}
          </text>
        </view>
      </view>

      <view class="gym-rating">
        <text class="rating-stars">â˜…</text>
        <text class="rating-text">{{gym.rating}} ({{gym.reviewCount}}æ¡è¯„ä»·)</text>
        <view class="gym-status {{gym.businessStatus === 'è¥ä¸šä¸­' ? 'status-open' : 'status-closed'}}">
          {{gym.businessStatus}}
        </view>
      </view>

      <view class="gym-address" bindtap="viewLocation">
        <text class="address-icon">ğŸ“</text>
        <text class="address-text">{{gym.address}}</text>
        <text class="distance" wx:if="{{gym.distance}}">{{gym.distance}}km</text>
      </view>

      <view class="gym-contact" wx:if="{{gym.phone}}">
        <text class="contact-icon">ğŸ“</text>
        <text class="contact-text" bindtap="callPhone">{{gym.phone}}</text>
      </view>
    </view>

    <!-- è¥ä¸šæ—¶é—´ -->
    <view class="section">
      <view class="section-title">è¥ä¸šæ—¶é—´</view>
      <view class="opening-hours">
        <view class="today-hours">
          <text class="day">ä»Šæ—¥</text>
          <text class="hours">{{gym.todayHours || 'è¥ä¸šæ—¶é—´æœªçŸ¥'}}</text>
        </view>
      </view>
    </view>

    <!-- åœºé¦†è®¾æ–½ -->
    <view class="section" wx:if="{{gym.facilities && gym.facilities.length > 0}}">
      <view class="section-title">åœºé¦†è®¾æ–½</view>
      <view class="facilities">
        <text wx:for="{{gym.facilities}}" 
              wx:key="*this" 
              class="facility-item">
          {{item}}
        </text>
      </view>
    </view>

    <!-- æ”¯æŒè¯¾ç¨‹ -->
    <view class="section" wx:if="{{gym.supportedPrograms && gym.supportedPrograms.length > 0}}">
      <view class="section-title">æ”¯æŒè¯¾ç¨‹</view>
      <view class="programs">
        <text wx:for="{{gym.supportedPrograms}}" 
              wx:key="*this" 
              class="program-item">
          {{item}}
        </text>
      </view>
    </view>

    <!-- åœºé¦†ä»‹ç» -->
    <view class="section" wx:if="{{gym.description}}">
      <view class="section-title">åœºé¦†ä»‹ç»</view>
      <text class="description">{{gym.description}}</text>
    </view>
  </view>

  <!-- åº•éƒ¨é¢„çº¦æŒ‰é’® -->
  <view class="bottom-actions">
    <button class="book-button" type="primary" bindtap="bookNow">
      ç«‹å³é¢„çº¦
    </button>
  </view>
</view>